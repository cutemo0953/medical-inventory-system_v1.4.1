# å°åŒ…é©—è­‰å·¥å…·å¿«é€Ÿå…¥é–€

## ğŸ“‹ ä½¿ç”¨å ´æ™¯

ç•¶æ‚¨å¾ç³»çµ±ä¸‹è¼‰åŒæ­¥å°åŒ…å¾Œï¼Œåœ¨åŒ¯å…¥å‰å…ˆé©—è­‰æ ¼å¼æ˜¯å¦æ­£ç¢ºã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ä¸‹è¼‰å°åŒ…å¾Œç«‹å³é©—è­‰

```bash
# å‡è¨­æ‚¨å¾ Safari ä¸‹è¼‰äº†å°åŒ…åˆ° Downloads ç›®éŒ„
python3 scripts/validate_sync_package.py ~/Downloads/sync_package_TC01.json
```

### 2. æŸ¥çœ‹è¼¸å‡º

**æˆåŠŸçš„æƒ…æ³**:
```
======================================================================
é©—è­‰åŒæ­¥å°åŒ…: sync_package_TC01.json
======================================================================
âœ“ JSON æ ¼å¼æ­£ç¢º
âœ“ æ¬„ä½ package_id å­˜åœ¨ä¸”é¡å‹æ­£ç¢º
âœ“ æ¬„ä½ checksum å­˜åœ¨ä¸”é¡å‹æ­£ç¢º
âœ“ åŒ…å« 150 ç­†è®Šæ›´è¨˜éŒ„
âœ“ æ‰€æœ‰è®Šæ›´è¨˜éŒ„æ ¼å¼æ­£ç¢º
âœ“ æ‰€æœ‰è³‡æ–™é¡å‹éƒ½æ˜¯ JSON å¯åºåˆ—åŒ–çš„
âœ“ æ ¡é©—ç¢¼æ ¼å¼æ­£ç¢º

âœ… å°åŒ…æ ¼å¼å®Œå…¨æ­£ç¢ºï¼Œå¯ä»¥å®‰å…¨åŒ¯å…¥ï¼
```

**å¤±æ•—çš„æƒ…æ³**:
```
======================================================================
é©—è­‰åŒæ­¥å°åŒ…: sync_package_TC01.json
======================================================================
âœ“ JSON æ ¼å¼æ­£ç¢º
âœ— ç¼ºå°‘å¿…è¦æ¬„ä½: checksum
âœ— è®Šæ›´ 5 åŒ…å«é JSON å¯åºåˆ—åŒ–çš„è³‡æ–™

âŒ å°åŒ…æ ¼å¼é©—è­‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¸Šè¿°éŒ¯èª¤è¨Šæ¯
```

### 3. é©—è­‰æ ¡é©—ç¢¼å®Œæ•´æ€§ï¼ˆæ¨è–¦ï¼‰

```bash
# ä½¿ç”¨ --verify-checksum é¸é …é‡æ–°è¨ˆç®—ä¸¦é©—è­‰æ ¡é©—ç¢¼
python3 scripts/validate_sync_package.py --verify-checksum ~/Downloads/sync_package_TC01.json
```

## ğŸ’¡ å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒ

### æƒ…å¢ƒ 1: ä¸‹è¼‰å¾Œé©—è­‰

```bash
# 1. åœ¨ Safari ä¸­é»æ“Šã€Œä¸‹è¼‰å°åŒ…ã€
# 2. ç­‰å¾…ä¸‹è¼‰å®Œæˆ
# 3. é©—è­‰å°åŒ…
python3 scripts/validate_sync_package.py ~/Downloads/sync_package_*.json

# 4. å¦‚æœé€šéï¼Œä½¿ç”¨ UI åŒ¯å…¥
# 5. å¦‚æœå¤±æ•—ï¼ŒæŸ¥çœ‹éŒ¯èª¤è¨Šæ¯ä¸¦ä¿®å¾©
```

### æƒ…å¢ƒ 2: USB å‚³è¼¸å‰é©—è­‰

```bash
# 1. ç”¢ç”Ÿå°åŒ…ä¸¦ä¸‹è¼‰
# 2. é©—è­‰æ ¼å¼å’Œæ ¡é©—ç¢¼
python3 scripts/validate_sync_package.py --verify-checksum sync_package.json

# 3. ç¢ºèªç„¡èª¤å¾Œè¤‡è£½åˆ° USB
cp sync_package.json /Volumes/USB_DRIVE/

# 4. åœ¨ç›®æ¨™ç«™é»å†æ¬¡é©—è­‰
python3 scripts/validate_sync_package.py /Volumes/USB_DRIVE/sync_package.json
```

### æƒ…å¢ƒ 3: æ‰¹æ¬¡é©—è­‰

```bash
# é©—è­‰å¤šå€‹å°åŒ…
for file in ~/Downloads/sync_*.json; do
    echo "=== é©—è­‰ $(basename $file) ==="
    python3 scripts/validate_sync_package.py "$file"
    echo ""
done
```

### æƒ…å¢ƒ 4: è…³æœ¬æ•´åˆ

```bash
#!/bin/bash
# è‡ªå‹•é©—è­‰ä¸¦åŒ¯å…¥å°åŒ…

PACKAGE_FILE="$1"

# å…ˆé©—è­‰
if python3 scripts/validate_sync_package.py "$PACKAGE_FILE"; then
    echo "å°åŒ…æœ‰æ•ˆï¼Œé–‹å§‹åŒ¯å…¥..."
    # å‘¼å«åŒ¯å…¥ API
    curl -X POST http://localhost:8000/api/station/sync/import \
      -H "Content-Type: application/json" \
      -d @"$PACKAGE_FILE"
else
    echo "âŒ å°åŒ…é©—è­‰å¤±æ•—ï¼Œä¸­æ­¢åŒ¯å…¥"
    exit 1
fi
```

## ğŸ” éŒ¯èª¤è¨ºæ–·

### éŒ¯èª¤ 1: JSON æ ¼å¼éŒ¯èª¤

**ç¾è±¡**:
```
âœ— JSON è§£æå¤±æ•—: Expecting ',' delimiter: line 10 column 5
```

**è§£æ±º**:
- å°åŒ…å¯èƒ½åœ¨ä¸‹è¼‰æ™‚ææ¯€
- é‡æ–°ä¸‹è¼‰å°åŒ…
- æª¢æŸ¥ç¶²è·¯é€£ç·š

### éŒ¯èª¤ 2: ç¼ºå°‘å¿…è¦æ¬„ä½

**ç¾è±¡**:
```
âœ— ç¼ºå°‘å¿…è¦æ¬„ä½: checksum
```

**è§£æ±º**:
- å°åŒ…ç”¢ç”Ÿä¸å®Œæ•´
- é‡æ–°ç”¢ç”Ÿå°åŒ…
- æª¢æŸ¥ generate endpoint

### éŒ¯èª¤ 3: é JSON å¯åºåˆ—åŒ–

**ç¾è±¡**:
```
âœ— è®Šæ›´ 5, æ¬„ä½ data.created_at: datetime
```

**è§£æ±º**:
- é€™æ˜¯ç¨‹å¼éŒ¯èª¤ï¼Œéœ€è¦ä¿®å¾©
- æŸ¥çœ‹ ERROR_HANDLING_GUIDE.md
- å›å ±å•é¡Œçµ¦é–‹ç™¼äººå“¡

### éŒ¯èª¤ 4: æ ¡é©—ç¢¼ä¸ç¬¦

**ç¾è±¡**:
```
âœ— æ ¡é©—ç¢¼é©—è­‰å¤±æ•—
  æœŸæœ›: abc123...
  å¯¦éš›: def456...
```

**è§£æ±º**:
- å°åŒ…åœ¨å‚³è¼¸ä¸­è¢«ä¿®æ”¹
- é‡æ–°ä¸‹è¼‰å°åŒ…
- æª¢æŸ¥å‚³è¼¸éç¨‹ï¼ˆUSB æ˜¯å¦æå£ï¼‰

## ğŸ“Š æ¸¬è©¦é©—è­‰å·¥å…·

åŸ·è¡Œå®Œæ•´çš„æ¸¬è©¦å¥—ä»¶ï¼š

```bash
./test_package_validation.sh
```

é æœŸè¼¸å‡ºï¼š
```
âœ… æ‰€æœ‰æ¸¬è©¦é€šéï¼
ç¸½è¨ˆ: 5 æ¸¬è©¦
é€šé: 5
å¤±æ•—: 0
```

## ğŸ“š æ›´å¤šè³‡è¨Š

- å®Œæ•´æ–‡ä»¶: `scripts/VALIDATE_PACKAGE_README.md`
- éŒ¯èª¤è™•ç†æŒ‡å—: `ERROR_HANDLING_GUIDE.md`
- æ¸¬è©¦è…³æœ¬: `test_package_validation.sh`

## ğŸ¯ æœ€ä½³å¯¦è¸

1. **ä¸‹è¼‰å¾Œç«‹å³é©—è­‰** - ç¢ºä¿å°åŒ…å®Œæ•´ç„¡æ
2. **ä½¿ç”¨æ ¡é©—ç¢¼é©—è­‰** - ç¢ºä¿è³‡æ–™å®Œæ•´æ€§
3. **ä¿ç•™é©—è­‰æ—¥èªŒ** - é‡å®šå‘è¼¸å‡ºåˆ°æª”æ¡ˆä¾›å¾ŒçºŒæŸ¥çœ‹
4. **æ‰¹æ¬¡è™•ç†** - ä¸€æ¬¡é©—è­‰å¤šå€‹å°åŒ…

```bash
# é©—è­‰ä¸¦ä¿ç•™æ—¥èªŒ
python3 scripts/validate_sync_package.py package.json 2>&1 | tee validation.log

# æª¢æŸ¥è¿”å›ç¢¼
echo $?  # 0 è¡¨ç¤ºæˆåŠŸï¼Œ1 è¡¨ç¤ºå¤±æ•—
```

## âš ï¸ æ³¨æ„äº‹é …

1. é©—è­‰å·¥å…·**ä¸æœƒä¿®æ”¹**å°åŒ…å…§å®¹
2. é©—è­‰å·¥å…·**ä¸æœƒåŒ¯å…¥**å°åŒ…åˆ°ç³»çµ±
3. é©—è­‰é€šé**ä¸ä¿è­‰**åŒ¯å…¥ä¸€å®šæˆåŠŸï¼ˆå¯èƒ½æœ‰å…¶ä»–å› ç´ ï¼‰
4. å»ºè­°åœ¨åŒ¯å…¥å‰**åŒæ™‚æª¢æŸ¥**è³‡æ–™åº«ç‹€æ…‹

## ğŸ› ï¸ ç–‘é›£æ’è§£

**å·¥å…·ç„¡æ³•åŸ·è¡Œï¼Ÿ**
```bash
# æª¢æŸ¥æ¬Šé™
ls -l scripts/validate_sync_package.py

# è¨­å®šåŸ·è¡Œæ¬Šé™
chmod +x scripts/validate_sync_package.py

# æª¢æŸ¥ Python ç‰ˆæœ¬ï¼ˆéœ€è¦ 3.6+ï¼‰
python3 --version
```

**æ‰¾ä¸åˆ°æª”æ¡ˆï¼Ÿ**
```bash
# ä½¿ç”¨çµ•å°è·¯å¾‘
python3 scripts/validate_sync_package.py "$(pwd)/Downloads/package.json"

# æˆ–åˆ‡æ›åˆ°å°ˆæ¡ˆç›®éŒ„
cd /path/to/medical-inventory-system_v1.4.1
python3 scripts/validate_sync_package.py ~/Downloads/package.json
```
